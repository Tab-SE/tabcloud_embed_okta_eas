<!DOCTYPE html>
<html lang="en">
  <head>
    {{>head}}
  </head>
  <body id="samples">

    {{>menu}}

    <div id="content" class="ui container padded grid relaxed">
      <div id="doc" class="column eight wide">
        <div class="doc-overview text container">

          {{! <img src="data:image/png;base64,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" alt=""> }}
        <img src="assets/images/trex.png" width="200" height="149" alt="">


          <h3 class="ui dividing header" data-se="overview-doc-header">
             Tableau Embedded with Okta EAS auth
          </h3>

          {{^isLoggedIn}}
            <p>Hello!</p>
            <p>If you're viewing this page then you have successfully configured this example server.  Your server configuration is listed on the right.</p>
            <p>This example shows you how to use the <a href="https://github.com/okta/okta-oidc-js/tree/master/packages/oidc-middleware">Okta OIDC Middleware Library</a> to add the <a href="https://developer.okta.com/authentication-guide/implementing-authentication/auth-code">Authorization Code Flow</a> to your application.</p>
            <p>When you click the login button below, you will be redirected to the login page on your Okta org.  After you authenticate, you will be returned to this application where a local cookie session will be created for you.</p>
            <p>If the authentication succeds, you will then be able to navigate to the "Tableau Dashboard" page and see the Tableau embedded content, all thanks to the Okta<->Tableau Server EAS integration.
          {{/isLoggedIn}}

          {{#isLoggedIn}}
            <p>Welcome back, {{userinfo.name}}!</p>
            <p>You have successfully authenticated against your Okta org, and have been redirected back to this application.  Here are some cool things to know:</p>
            <ul>
              <li> The <a href="/dash">Tableau Dashboard</a> embedded, where SSO happened seamlessly through the Tableau Server <-> Okta EAS integration (Connected Apps Oauth2 Trust).
              <li>The <a href="https://github.com/okta/okta-oidc-js/tree/master/packages/oidc-middleware">Okta OIDC Middleware Library</a> has created a local cookie session to persist your authentication.</li>
              <li>The session contains the information retrieved from the <a href="https://developer.okta.com/docs/api/resources/oidc#get-user-information">User Info Endpoint</a> of the cofigured issuer. This information is automatically persisted for you, and can be read from <code>req.userContext.userinfo</code></li>
              <li>Visit the <a href="/profile">My Profile</a> page in this application to see an example of using this data.</li>
            </ul>
            <p></p>
          {{/isLoggedIn}}

          {{^isLoggedIn}}
            <form method="get" action="/login">
              <button id="login-button" class="ui primary button" type="submit">Log In</button>
            </form>
          {{/isLoggedIn}}
        </div>
      </div>
      {{>server-config}}
    </div>
  </body>
</html>
